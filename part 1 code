import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

public class ClimateDetectionApp {
    public static void main(String[] args) {
        try {
            // âœ… 1. Define your OpenWeatherMap API key (make sure no \r or \n at the end!)
            String apiKey = "55e287914a65ddf929509bdaba96eb99";

            // âœ… 2. Define the city you want weather information for
            String city = "Chennai";

            // âœ… 3. Construct the full URL by inserting the city and API key
            String urlString = "http://api.openweathermap.org/data/2.5/weather?q="
                                + city
                                + "&appid=" + apiKey
                                + "&units=metric"; // You can change units to imperial if needed

            // âœ… 4. Create a URL object from the string
            URL url = new URL(urlString);

            // âœ… 5. Open an HTTP connection to the URL
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setRequestMethod("GET");

            // âœ… 6. Create a reader to read the response line by line
            BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            String inputLine;
            StringBuilder response = new StringBuilder();

            // âœ… 7. Read the entire response into a StringBuilder
            while ((inputLine = in.readLine()) != null) {
                response.append(inputLine);
            }

            // âœ… 8. Close resources
            in.close();
            conn.disconnect();

            // âœ… 9. Print the raw JSON response from the API
            System.out.println("Weather API Response for " + city + ":");
            System.out.println(response.toString());

        } catch (Exception e) {
            // ðŸš¨ Catch and print any errors (like wrong API key, connection issue, etc.)
            System.out.println("Error occurred: " + e.getMessage());
            e.printStackTrace();
        }
    }
}
